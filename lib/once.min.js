!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.once=t()}}(function(){return function t(n,e,i){function r(u,f){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!f&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[u]={exports:{}};n[u][0].call(l.exports,function(t){var e=n[u][1][t];return r(e?e:t)},l,l.exports,t,n,e,i)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(t,n,e){n.exports="undefined"!=typeof window},{}],2:[function(t,n,e){var i=t("utilise/has");n.exports=function(t,n,e,r){return!i(t,n)&&Object.defineProperty(t,n,{value:e,writable:r}),t[n]}},{"utilise/has":5}],3:[function(t,n,e){var i=t("utilise/err")("[emitterify]"),r=t("utilise/keys"),o=t("utilise/def"),u=t("utilise/not"),f=t("utilise/is");n.exports=function(t){function n(n,i,o){var s=n.split(".")[1],c=n.split(".")[0],l=t.on[c]||[],a=(l.length-1,f.arr(i)?i:[i||t]);if(s)return e(l,s,a),t;for(var h=l.length;h>=0;h--)e(l,h,a);return r(l).filter(u(isFinite)).filter(o||Boolean).map(function(t){return e(l,t,a)}),t}function e(n,e,r){if(n[e]){var o=n[e];n[e].once&&(isFinite(e)?n.splice(e,1):delete n[e]);try{o.apply(t,r)}catch(u){i(u,u.stack)}}}function s(n,e){var i=n.split(".")[1],r=n.split(".")[0];return t.on[r]=t.on[r]||[],e||i?!e&&i?t.on[r][i]:i?(t.on[r][i]=e,t):(t.on[r].push(e),t):t.on[r]}function c(n,e){return e.once=!0,t.on(n,e),t}return o(t,"on",s,1),o(t,"once",c,1),o(t,"emit",n,1),t}},{"utilise/def":2,"utilise/err":4,"utilise/is":6,"utilise/keys":8,"utilise/not":9}],4:[function(t,n,e){var i=t("utilise/owner"),r=t("utilise/to");n.exports=function(t){return function(n){if(!i.console||!console.error.apply)return n;var e=r.arr(arguments);return e.unshift(t.red?t.red:t),n}}},{"utilise/owner":11,"utilise/to":13}],5:[function(t,n,e){n.exports=function(t,n){return n in t}},{}],6:[function(t,n,e){function i(t){return function(n){return n==t}}function r(t){return"function"==typeof t}function o(t){return"boolean"==typeof t}function u(t){return"string"==typeof t}function f(t){return"number"==typeof t}function s(t){return"object"==typeof t}function c(t){return"object"==typeof t&&!(t instanceof Array)}function l(t){return 1==!!t}function a(t){return 0==!!t}function h(t){return t instanceof Array}function d(t){return null===t}function p(t){return"undefined"!=typeof t}function g(t){return function(n){return t?t.indexOf?~t.indexOf(n):n in t:!1}}n.exports=i,i.fn=r,i.str=u,i.num=f,i.obj=s,i.lit=c,i.bol=o,i.truthy=l,i.falsy=a,i.arr=h,i["null"]=d,i.def=p,i["in"]=g},{}],7:[function(t,n,e){var i=t("utilise/is"),r=t("utilise/str");n.exports=function o(t,n){var e=arguments.length>1,u=r(t).split("."),f=u.shift();return function(r,s){function c(t){var n=o(t)(r);void 0!=n&&o(t,n)(l)}var l={};return r?t?i.arr(t)?(t.map(c),l):r[t]||!u.length?e?(r[t]=i.fn(n)?n(r[t],s):n,r):r[t]:e?(o(u.join("."),n)(r[f]?r[f]:r[f]={}),r):o(u.join("."))(r[f]):r:void 0}}},{"utilise/is":6,"utilise/str":12}],8:[function(t,n,e){n.exports=function(t){return Object.keys(t||{})}},{}],9:[function(t,n,e){n.exports=function(t){return function(){return!t.apply(this,arguments)}}},{}],10:[function(t,n,e){function i(t,n,e){function u(t,n,e,r){var o,u,f,l,a,h=s.length,d=[],p=[],g=[],y=0,v=0,m=[],_=[];if(c=h+1,1===arguments.length){if("string"!=typeof t)return i(t);for(;--c>0;)d=d.concat(Array.prototype.slice.call(s[h-c].querySelectorAll(t),0));return i(d)}if(1===n&&"string"==typeof t&&2==arguments.length){for(;--c>0;){for(l=s[h-c],y=l.children.length;y-->0;)if(l.children[y].matches(t)){d[d.length]=l.children[y],l.children[y].__data__=l.__data__||1;break}if(0>y){for(f=/([^\.\[]*)/.exec(t)[1]||"div",l.appendChild(a=d[d.length]=p[p.length]=document.createElement(f)),m=[],_=[],t.replace(/\[(.+?)="(.*?)"\]/g,function(t,n,e){return m[m.length]=[n,e],""}).replace(/\.([^.]+)/g,function(t,n){return _[_.length]=n,""}),v=0;v<m.length;v++)a.setAttribute(m[v][0],m[v][1]);for(v=0;v<_.length;v++)a.classList.add(_[v]);a.__data__=l.__data__||1}}return i(d,p,g)}for(;--c>0;){l=s[h-c],o="function"==typeof t?t(l.__data__):t,u="function"==typeof n?n(l.__data__):n,1===n&&(u=l.__data__||[1]),"string"==typeof u&&(u=[u]),u||(u=[]),u.constructor!==Array&&(u=[u]);var x=l.children.length,b=x+1,w=u.length,A=new Array(w);for(y=0;--b>0;)a=l.children[x-b],a.matches(o)&&(++y>w?(x--,l.removeChild(g[g.length]=a)):(a.__data__=u[y-1],d[d.length]=A[y-1]=a,"function"==typeof A[y-1].draw&&A[y-1].draw()));for(;y++<w;){for(f=o.call?o(u[y-1],y-1):/([^\.\[]*)/.exec(o)[1]||"div",r?l.insertBefore(A[y-1]=d[d.length]=p[p.length]=document.createElement(f),l.querySelector(r)):l.appendChild(A[y-1]=d[d.length]=p[p.length]=document.createElement(f)),m=[],_=[],o.toString().replace(/\[(.+?)="(.*?)"\]/g,function(t,n,e){return m[m.length]=[n,e],""}).replace(/\.([^.]+)/g,function(t,n){return _[_.length]=n,""}),v=0;v<m.length;v++)A[y-1].setAttribute(m[v][0],m[v][1]);for(v=0;v<_.length;v++)A[y-1].classList.add(_[v]);A[y-1].__data__=u[y-1]}}return i(d,p,g)}for(var s=u.nodes=Array===t.constructor?t:"string"==typeof t?document.querySelectorAll(t):[t],c=s.length;c-->0;)s[c].evented||r(s[c]);return u.node=function(){return s[0]},u.enter=function(){return i(n)},u.exit=function(){return i(e)},u.text=function(t){var n="function"==typeof t;return 0===arguments.length?s[0].textContent:(this.each(function(e){var i,r=""+(n?t.call(this,e):t);this.textContent!==r&&((i=this.firstChild)?"#text"===i.nodeName?i.nodeValue=r:this.textContent=r:this.appendChild(document.createTextNode(r)))}),this)},u.html=function(t){var n="function"==typeof t;return 0===arguments.length?s[0].innerHTML:(this.each(function(e){var i=""+(n?t.call(this,e):t);this.innerHTML!==i&&(this.innerHTML=i)}),this)},u.attr=function(t,n){var e="function"==typeof n;return 1===arguments.length?s[0].getAttribute(t):(this.each(function(i){var r=e?n.call(this,i):n;!r&&this.hasAttribute(t)?this.removeAttribute(t):r&&this.getAttribute(t)!==r&&this.setAttribute(t,r)}),this)},u.classed=function(t,n){var e="function"==typeof n;return 1===arguments.length?s[0].classList.contains(t):(this.each(function(i){var r=e?n.call(this,i):n;r&&!this.classList.contains(t)?this.classList.add(t):!r&&this.classList.contains(t)&&this.classList.remove(t)}),this)},u.property=function(t,n){var e="function"==typeof n;return 1===arguments.length?f(t)(s[0]):(this.each(function(i){var r=e?n.call(this,i):n;void 0!==r&&f(t)(this)!==r&&f(t,function(){return r})(this)}),this)},u.each=function(t){for(c=0;node=s[c++];)t.call(node,node.__data__,c);return this},u.remove=function(){return this.each(function(t){this.parentNode.removeChild(this)}),this},u.draw=o("draw",u),u.once=o("once",u),u.emit=o("emit",u),u.on=o("on",u),u}function r(t){function n(t){"object"==typeof window.d3&&(window.d3.event=t);var n="CustomEvent"===t.constructor.name||~t.toString().indexOf("CustomEvent");i(t.type,n&&t.detail||this.__data__)}t.on||u(t);var e=t.on,i=t.emit;t.evented=!0,t.on=function(i){return t.addEventListener(i.split(".").shift(),n),e.apply(t,arguments),t},t.emit=function(n,e,i){var r=i||{detail:e,bubbles:!1,cancelable:!1};return(t.host||t).dispatchEvent(new window.CustomEvent(n,r)),t}}function o(t,n){return function(){var e=arguments;return n.each(function(n){this[t]&&this[t].apply(this,e)}),n}}var u=t("utilise/emitterify"),f=t("utilise/key");n.exports=i},{"utilise/emitterify":3,"utilise/key":7}],11:[function(t,n,e){(function(e){n.exports=t("utilise/client")?window:e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"utilise/client":1}],12:[function(t,n,e){var i=t("utilise/is");n.exports=function(t){return 0===t?"0":t?i.fn(t)?""+t:i.obj(t)?JSON.stringify(t):String(t):""}},{"utilise/is":6}],13:[function(t,n,e){function i(t){return Array.prototype.slice.call(t,0)}function r(t){function n(t,n,i){return 0===i&&(t={}),t[n[e]]=n,t}var e="id";return 1==arguments.length?(e=t,n):n.apply(this,arguments)}n.exports={arr:i,obj:r}},{}]},{},[10])(10)});